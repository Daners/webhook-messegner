var express=require("express"),bodyParser=require("body-parser"),app=express().use(bodyParser.json());app.listen(process.env.PORT||1337,function(){return console.log("webhook is listening")});app.post("/webhook",function(a,b){var c=a.body;"page"===c.object?(c.entry.forEach(function(a){console.log(a.messaging[0])}),b.status(200).send("EVENT_RECEIVED")):b.sendStatus(404)});
app.get("/webhook",function(a,b){var c=a.query["hub.mode"],d=a.query["hub.verify_token"],e=a.query["hub.challenge"];c&&d&&("subscribe"===c&&"P0nt3r1k0s0!"===d?(console.log("WEBHOOK_VERIFIED"),b.status(200).send(e)):b.sendStatus(403))});
